<%- include('templates/header') %>

<h1 class="mb-4">Admin</h1>

<table class="table table-bordered table-hover">
  <thead class="table-dark">
    <tr>
      <th>Username</th>
      <th>Email</th>
      <th>User Type</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% users.forEach(user => { %>
      <tr>
        <td><%= user.username %></td>
        <td><%= user.email %></td>
        <td><%= user.user_type %></td>
        <td>
          <% if (user.email === session.email) { %>
            <span class="text-muted">You</span>
          
          <% } else if (user.user_type === 'user') { %>
            <form action="/promote" method="POST" style="display:inline-block;">
              <input type="hidden" name="email" value="<%= user.email %>">
              <button type="submit" class="btn btn-success btn-sm">Promote to Admin</button>
            </form>
          
          <% } else { %>
            <form action="/demote" method="POST" style="display:inline-block;">
              <input type="hidden" name="email" value="<%= user.email %>">
              <button type="submit" class="btn btn-warning btn-sm">Demote to User</button>
            </form>
          <% } %>
          <% } %>
        </td>
      </tr>
    <% }); %>
  </tbody>
</table>

<a href="/" class="btn btn-danger mt-4">Back to Home</a>

<%- include('templates/footer') %>
